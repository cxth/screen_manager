(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{20:function(t,e,n){"use strict";var i=n(4);n.n(i).a},21:function(t,e,n){(t.exports=n(7)(!1)).push([t.i,"\n.my-event[data-v-2cd5dbb8] {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  border-radius: 2px;\n  background-color: #1867c0;\n  color: #ffffff;\n  border: 1px solid #1867c0;\n  font-size: 12px;\n  padding: 3px;\n  cursor: pointer;\n  margin-bottom: 1px;\n  left: 4px;\n  margin-right: 8px;\n  position: relative;\n}\n.my-event.with-time[data-v-2cd5dbb8] {\n  position: absolute;\n  right: 4px;\n  margin-right: 0px;\n}\n",""])},23:function(t,e,n){"use strict";n.r(e);var i=n(0),s=n.n(i);function l(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var o={props:{source:String},data:function(){return{selected_outlet:null,selected_screen:null,selected_screen_schedule:null,screen_autologin:null,screen_now_showing:null,selected_mediagroup:null,selected_link:null,selected_link_name:null,selected_link_url:null,outlets:null,media_assets:null,links:null,newURL:null,newURL_name:null,newURL_id:null,isFormValid:!0,newScreen:null,drawer:null,drawerRight:null,screen:1,screenm:null,todayx:"2020-01-01",events:[]}},mounted:function(){},computed:{},created:function(){this.$vuetify.theme.dark=!0,this.getOutlets(),this.getMediaAssets(),this.getLinks(),this.todayx=this.momentNow("date")},methods:{openLink:function(t){window.open("".concat(this.siteURL,"/admin/").concat(t))},getOutlets:function(){var t=this;s.a.get("".concat(this.siteURL,"/api/screen/all")).then((function(e){var n={};e.data.forEach((function(t){Object.keys(t)in n?n[Object.keys(t)].push(Object.values(t)[0]):n[Object.keys(t)]=Object.values(t)})),t.outlets=n,console.log(t.outlets)})).catch((function(e){t.errors.push(e)}))},getMediaAssets:function(){var t=this;s.a.get("".concat(this.siteURL,"/api/media/all")).then((function(e){t.media_assets=e.data})).catch((function(e){t.errors.push(e)}))},getLinks:function(){var t=this;s.a.get("".concat(this.siteURL,"/api/l")).then((function(e){var n={};e.data.forEach((function(t){n[t.id]=t})),t.links=n})).catch((function(e){console.log("links not working"),t.errors.push(e)}))},getScreenSched:function(){var t=this;s()({method:"get",url:"".concat(this.siteURL,"/api/schedule/ss/").concat(this.selected_screen)}).then((function(e){e.data&&(t.selected_screen_schedule=e.data,t.events=t.eventsFormat(),t.events.length>0?(t.screen_now_showing=t.events[t.events.length-1].name,console.log(t.events[t.events.length-1].name)):t.screen_now_showing="No current content")})).catch((function(e){t.errors.push(e)}))},getScreenAutologin:function(){var t=this;console.log("getScreenAutologin"),s()({method:"post",url:"".concat(this.siteURL,"/api/screen/login"),data:{screen_id:this.selected_screen}}).then((function(e){console.log(e.data),t.screen_autologin="".concat(t.siteURL,"/client?r=").concat(e.data)})).catch((function(e){t.errors.push(e)}))},outletSelect:function(t){console.log("outlet select"),this.newScreen=""},screenSelect:function(t){if(t){var e=t.currentTarget.id.split(".");this.selected_outlet=e[0],this.selected_screen=e[1],this.getScreenSched(),this.getScreenAutologin()}},linkSelect:function(t){if(t){var e=t.currentTarget.id.split(".");this.selected_mediagroup=e[0],this.selected_link=e[1],this.selected_link_name=this.links[this.selected_link].name,this.selected_link_url=this.links[this.selected_link].url,console.log(this.selected_link_name),console.log(this.selected_link_url),this.newURL=null,this.newURL_name=null,this.isFormValid=!1}},addNewScreen:function(t){var e=this;console.log("adding new screen");var n=t.currentTarget.id.split(".");s()({method:"post",url:"".concat(this.siteURL,"/api/").concat(n[0],"/screen"),data:{outlet_id:n[0],outlet_intid:n[1],screen_description:this.newScreen}}).then((function(t){"Saved"==t.data&&e.getOutlets()})).catch((function(t){e.errors.push(t)}))},addLink:function(t){var e=this;s()({method:"post",url:"".concat(this.siteURL,"/api/l"),data:{media__asset_id:100,name:this.newURL_name,url:this.newURL}}).then((function(t){alert("link save"),console.log("the link id: "+t.data),e.newURL_id=t.data})).catch((function(t){e.errors.push(t)}))},deleteLink:function(t){var e=this;confirm("DANGER! Are you sure you like to DELETE this link?")&&s.a.delete("".concat(this.siteURL,"/api/l/").concat(t)).then((function(t){alert("link deleted"),e.getMediaAssets(),e.resetData()})).catch((function(t){e.errors.push(t)}))},addSched:function(t){var e=this;if(console.log("selected link "),console.log(this.selected_link),null!=this.selected_screen){if(null==this.selected_link){if(!this.newURL||!this.newURL_name)return void alert("Please complete URL fields");var n={screen_id:this.selected_screen,link_name:this.newURL_name,url:this.newURL,show_datetime:this.momentNow()}}else n={screen_id:this.selected_screen,link_id:this.selected_link,url:this.selected_link_url,show_datetime:this.momentNow()};console.log("final mydata "),console.log(n),s()({method:"post",url:"".concat(this.siteURL,"/api/schedule/screen/").concat(this.selected_screen),data:n}).then((function(t){console.log(t),alert("schedule save"),n={},e.resetData(),e.getScreenSched(),e.getMediaAssets(),e.getLinks()})).catch((function(t){e.errors.push(t)}))}else alert("no screen selected")},resetData:function(){this.selected_link=null,this.selected_link_url=null,this.selected_link_name=null,this.selected_mediagroup=null,this.newURL=null,this.newURL_name=null,this.newURL_id=null},disableMedia:function(t){this.isFormValid=!0,this.selected_mediagroup=null,this.selected_link=null,this.selected_link_name=null,this.selected_link_url=null},logout:function(){var t=this;confirm("Are you sure you like to logout?")&&s.a.get("".concat(this.siteURL,"/logout")).then((function(t){location.reload()})).catch((function(e){t.errors.push(e)}))},momentNow:function(t){return t?dayjs().format("YYYY-MM-DD"):dayjs().format("YYYY-MM-DD HH:mm:ss")},trimObj:function(t){return Object.assign.apply(Object,[{}].concat(l(t)))},toArray:function(t){return Object.entries(t)},eventsFormat:function(){var t=[];return this.selected_screen_schedule.forEach((function(e,n,i){var s=e[Object.keys(e)].link_name,l=e[Object.keys(e)].show_datetime,a=e[Object.keys(e)].expire_datetime,o={name:s,start:l,end:a};null==a&&delete o.end,t.push(o)})),t}}},r=(n(20),n(5)),c=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"inspire"}},[n("v-navigation-drawer",{attrs:{app:"",clipped:"",right:"",width:270},model:{value:t.drawerRight,callback:function(e){t.drawerRight=e},expression:"drawerRight"}},[n("v-list-item",{attrs:{link:""}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-folder-multiple-image")])],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v("Media Assets")])],1)],1),t._v(" "),n("v-list",{attrs:{dense:""}},[n("v-list-item",{attrs:{link:""}},[n("v-expansion-panels",t._l(t.media_assets,(function(e,i){return n("v-expansion-panel",{key:i},[n("v-expansion-panel-header",[t._v(t._s(e.name))]),t._v(" "),n("v-expansion-panel-content",[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{attrs:{color:"primary"},model:{value:t.screen,callback:function(e){t.screen=e},expression:"screen"}},t._l(e.links,(function(i,s){return n("v-list-item",{key:s,attrs:{id:e.name+"."+i.id},on:{click:t.linkSelect}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(i.name)}})],1),t._v(" "),n("v-tooltip",{attrs:{left:""},scopedSlots:t._u(["Custom Links"===e.name?{key:"activator",fn:function(e){var s=e.on,l=e.attrs;return[n("v-list-item-icon",t._g(t._b({staticClass:"ml-5",on:{click:function(e){return t.deleteLink(i.id)}}},"v-list-item-icon",l,!1),s),[n("v-icon",[t._v("mdi-server-remove")])],1)]}}:null],null,!0)},[t._v(" "),n("span",[t._v("delete link")])])],1)})),1)],1)],1)],1)})),1)],1)],1)],1),t._v(" "),n("v-app-bar",{attrs:{app:"","clipped-right":"",dark:""}},[n("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),n("v-toolbar-title",{staticStyle:{color:"#FFA500"}},[t._v("Screen Manager")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawerRight=!t.drawerRight}}})],1),t._v(" "),n("v-navigation-drawer",{attrs:{app:"",width:270},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list-item",{attrs:{link:""}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-home")])],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v("Outlets")])],1)],1),t._v(" "),n("v-list",{attrs:{dense:""}},[n("v-list-item",{attrs:{link:""},on:{click:t.outletSelect}},[n("v-expansion-panels",t._l(t.outlets,(function(e,i){return n("v-expansion-panel",{key:i},[n("v-expansion-panel-header",[t._v(t._s(i))]),t._v(" "),n("v-expansion-panel-content",[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{attrs:{color:"primary"}},[n("v-list-item",[n("v-list-item-content",[n("v-text-field",{staticClass:"ma-0 pa-0",attrs:{placeholder:"Screen Name",outlined:"",dense:""},model:{value:t.newScreen,callback:function(e){t.newScreen=e},expression:"newScreen"}}),t._v(" "),n("v-btn",{attrs:{"x-small":"",color:"secondary",dark:"",id:e[0].outlet_id+"."+e[0].outlet_intid+".new"},on:{click:t.addNewScreen}},[t._v("\n                        Add Screen\n                      ")])],1)],1),t._v(" "),t._l(e,(function(e,i){return n("v-list-item",{key:i,attrs:{id:e.outlet_name+"."+e.id},on:{click:t.screenSelect}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.description)}})],1),t._v(" "),n("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on,l=i.attrs;return[n("v-list-item-icon",t._g(t._b({staticClass:"ml-5",on:{click:function(n){return t.openLink(e.id)}}},"v-list-item-icon",l,!1),s),[n("v-icon",[t._v("mdi-eye")])],1)]}}],null,!0)},[t._v(" "),n("span",[t._v("click to visit screen")])])],1)}))],2)],1)],1)],1)})),1)],1),t._v(" "),n("v-list-item",{attrs:{link:""},on:{click:t.logout}},[n("v-list-item-action",[n("v-icon",[t._v("mdi-exit-to-app")])],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v("Logout")])],1)],1)],1)],1),t._v(" "),n("v-main",[n("v-container",{staticClass:"align-start \n             fill-height\n             justify-space-between",attrs:{fluid:""}},[[n("v-row",{staticClass:"mx-auto",attrs:{align:"center",justify:"center"}},[n("v-col",[n("v-card",[n("v-tabs",{attrs:{left:"",dense:""}},[n("v-tab",[n("v-icon",{attrs:{left:""}},[t._v("mdi-play-box-outline")]),t._v("\n                  SCREEN\n                ")],1),t._v(" "),n("v-tab",[n("v-icon",{attrs:{left:""}},[t._v("mdi-calendar-clock")]),t._v("\n                  SCHEDULE\n                ")],1),t._v(" "),n("v-tab",[n("v-icon",{attrs:{left:""}},[t._v("mdi-key")]),t._v("\n                  INFO\n                ")],1),t._v(" "),n("v-tab-item",[n("v-row",{attrs:{justify:"center",align:"center",pb:"3"}},[n("v-col",{staticClass:"shrink"},[n("v-card",{staticClass:"mx-auto pb-10 mb-12",attrs:{height:"100%",width:"500",outlined:""}},[n("v-row",{staticClass:"mb-5",attrs:{"no-gutters":""}},[n("v-col",[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("div",{staticClass:"overline mb-4"},[t._v("SCREEN")]),t._v(" "),n("v-list-item-subtitle",[t._v(t._s(t.selected_outlet))]),t._v(" "),n("v-list-item-title",{staticClass:"headline mb-4"},[t._v(t._s(t.selected_screen))])],1)],1)],1),t._v(" "),n("v-col",[n("v-list-item",{attrs:{"three-line":""}},[n("v-list-item-content",[n("div",{staticClass:"overline mb-4"},[t._v("CONTENT")]),t._v(" "),n("v-list-item-subtitle",[t._v(t._s(t.selected_mediagroup))]),t._v(" "),n("v-list-item-title",{staticClass:"headline mb-4"},[t._v(t._s(t.selected_link_name))])],1)],1)],1),t._v(" "),n("v-responsive",{attrs:{width:"100%"}})],1),t._v(" "),n("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center"}},[n("v-col",{staticStyle:{maxWidth:"280px"},attrs:{fullscreen:t.$vuetify.breakpoint.mobile}},[n("v-text-field",{attrs:{label:"or enter URL",type:"url",outlined:"",dense:"",disabled:!t.isFormValid},on:{keyup:t.disableMedia},model:{value:t.newURL,callback:function(e){t.newURL=e},expression:"newURL"}}),t._v(" "),n("v-text-field",{attrs:{label:"URL Name",outlined:"",dense:"",disabled:!t.isFormValid},model:{value:t.newURL_name,callback:function(e){t.newURL_name=e},expression:"newURL_name"}})],1)],1),t._v(" "),n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{align:"center",justify:"center"}},[n("v-btn",{staticClass:"mr-2",attrs:{rounded:"",color:"primary",dark:""},on:{click:t.addSched}},[t._v("SAVE")]),t._v(" "),n("v-btn",{staticClass:"ml-2",attrs:{rounded:"",color:"primary",dark:""},on:{click:t.disableMedia}},[t._v("CLEAR")])],1)],1)],1)],1)],1)],1),t._v(" "),n("v-tab-item",[n("v-card",{attrs:{flat:""}},[[n("v-row",[n("v-col",{attrs:{align:"center",justify:"center"}},[n("v-sheet",{staticStyle:{maxWidth:"500px"},attrs:{fullscreen:t.$vuetify.breakpoint.mobile}},[n("v-calendar",{ref:"calendar",attrs:{now:t.todayx,value:t.todayx,events:t.events,color:"primary",type:"day"},model:{value:t.todayx,callback:function(e){t.todayx=e},expression:"todayx"}})],1)],1)],1)]],2)],1),t._v(" "),n("v-tab-item",[[n("v-container",{staticClass:"grey lighten-5"},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{sm:"9"}},[n("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[n("div",{staticClass:"pa-4"},[n("v-btn",{staticClass:"text-center",attrs:{rounded:"",color:"primary",dark:""}},[t._v("Auto-Login URL")]),t._v(" "),n("span",{staticClass:"font-weight-thin pl-3"},[t._v(" \n                                  "+t._s(t.screen_autologin)+"\n                                ")])],1),t._v(" "),n("div",{staticClass:"pa-4"},[n("v-btn",{staticClass:"text-center ml-3",attrs:{rounded:"",color:"primary",dark:""}},[t._v("Now Showing")]),t._v(" "),n("span",{staticClass:"font-weight-thin pl-4"},[t._v(" \n                                  "+t._s(t.screen_now_showing)+"\n                                ")])],1)])],1)],1)],1)]],2)],1)],1)],1)],1)]],2)],1),t._v(" "),n("v-footer",{staticClass:"white--text",attrs:{app:""}},[n("span",[t._v("MSW")]),t._v(" "),n("v-spacer"),t._v(" "),n("span",[t._v("© "+t._s((new Date).getFullYear()))])],1)],1)}),[],!1,null,"2cd5dbb8",null);e.default=c.exports},4:function(t,e,n){var i=n(21);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(8)(i,s);i.locals&&(t.exports=i.locals)},5:function(t,e,n){"use strict";function i(t,e,n,i,s,l,a,o){var r,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),l&&(c._scopeId="data-v-"+l),a?(r=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=r):s&&(r=o?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),r)if(c.functional){c._injectStyles=r;var d=c.render;c.render=function(t,e){return r.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,r):[r]}return{exports:t,options:c}}n.d(e,"a",(function(){return i}))}}]);